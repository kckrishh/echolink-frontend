<!-- chat.component.html -->
<div class="h-full md:h-[87vh] w-full overflow-hidden flex mx-auto">
  <section
    class="h-full w-full grid rounded-md shadow-2xl"
    [ngClass]="{
      'md:grid-cols-[0.5fr_1.8fr]': !isGroup,
      'md:grid-cols-[0.5fr_1.8fr_0.3fr]': isGroup,
      'grid-cols-1': isMobile,
    }"
  >
    <!-- ✅ DESKTOP/TABLET (md+): normal layout -->
    <div class="bg-bg-panel min-w-0 h-full min-h-0 hidden md:block">
      <app-sidebar-left></app-sidebar-left>
    </div>

    <div class="bg-bg-panel min-w-0 h-full min-h-0 hidden md:block">
      <app-chat-main></app-chat-main>
    </div>

    <div
      class="bg-bg-panel min-w-0 h-full min-h-0 hidden lg:block"
      *ngIf="isGroup"
    >
      <app-sidebar-right></app-sidebar-right>
    </div>

    <!-- ✅ MOBILE (<md): FULL SCREEN switch between LIST and CHAT -->
    <!-- LIST (full screen) -->
    <div
      class="bg-bg-panel min-w-0 h-full min-h-0 md:hidden"
      *ngIf="isMobile && mobileView === 'list'"
    >
      <app-sidebar-left></app-sidebar-left>
    </div>

    <!-- CHAT (full screen) -->
    <div
      class="bg-bg-panel min-w-0 h-full min-h-0 md:hidden"
      *ngIf="isMobile && mobileView === 'chat'"
    >
      <!-- Back button overlay (top-left) -->
      <button
        type="button"
        class="fixed md:hidden left-3 top-[calc(10px+env(safe-area-inset-top))] z-[60] h-10 w-10 rounded-xl bg-bg-panel border border-border-base shadow-echo-md flex items-center justify-center text-text-muted hover:text-text-body hover:bg-bg-hover transition"
        (click)="mobileView = 'list'"
        aria-label="Back to conversations"
      >
        <lucide-icon name="chevron-left" class="w-5 h-5"></lucide-icon>
      </button>

      <app-chat-main></app-chat-main>
    </div>
  </section>
</div>
